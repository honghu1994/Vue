

# Vue.js - day15



## 后台 - 权限管理 - 角色列表 - 分配权限

1. 给对话框的确定按钮加点击事件
2. 拿到选中的权限的id
3. 拿到当前这一行的角色id
4. 调用方法发请求
5. 隐藏对话框
6. 注意：此接口有2个参数，拼接在url上的只有一个

### 注意：

- 设置权限时，除了要拿到三级的id，还要拿到一级和二级的id（也就是半选的id）



## resetful api

- 就是一种接口规范
- 根据不同的请求方式做不同的处理
- 常用的请求方式：`get` 和 `post`
- 但是现在越来越多的程序员推荐接口要用`restful原则`：
- 让人一看接口地址，和请求方式，就知道这个接口可以用来干嘛！
- /user  请求方式：get    跟用户有关，获取用户
- /user  请求方式：post  跟用户有关，新增用户
- /user  请求方式：put  跟用户有关，修改用户
- /user  请求方式：delete  删除用户

1. 网络请求设计方法时，考虑到数据的操作主要：增删改查，方法的命名可以体现这个操作
   1. GET（SELECT）：从服务器取出资源（一项或多项）。
   2. POST（CREATE）：在服务器新建一个资源。
   3. PUT（UPDATE）：在服务器更新资源（客户端提供改变后的完整资源）
   4. DELETE（DELETE）：从服务器删除资源。
   5. PATCH（UPDATE）：在服务器更新资源（客户端提供改变的属性）。
   6. HEAD：获取资源的元数据。
   7. OPTIONS：获取信息，关于资源的哪些属性是客户端可以改变的。
2. get和post已经够用了，其他的用的不多
3. 面试：说一下请求方式有哪些
   1. 如果问到这种题目，只答get和post比较扣分
   2. 常见的有get和post，但实际还有一堆请求方法，例如put,delete,options,head,path
   3. 为什么要有这么多请求方式呢？因为设计之初是想不同的请求方式去做不同的操作，这样就能细分，而且现在写接口有一个规范，restful规范，需要别人一看地址就知道操作什么数据，让人一看请求方式就知道是做什么样的操作是新增、查询、还是修改删除



## 路由元信息

[传送门](https://router.vuejs.org/zh/guide/advanced/meta.html)

- 简单来说就是给一堆路由页面打一个标签
- 有这个标签可以划为一类，做对应的处理
- 例如：可以把`users` ，`roles` 打个标签划为一类，代表它们都需要做登录判断的处理
- 在路由规则后面加一个 meta，meta是一个对象，对象里写它对应的标签值
- 用法是，取出to.meta.xxx



## 响应拦截

- 所有响应回来的时候都会先拦截下来，做一些处理
- 例如：可以判断是否为有效的token，如果不是，就打回登录页

```js
http.interceptors.response.use(function (config) {},function(error){});
```



## 假分页

- 真分页：接口直接支持分页，你调用接口获得的数据就是分页的数据
- 假分页：你调用接口获取的还是所有的数据，只是自己通过代码人为的进行分页，假分页
- 分页算法：
  - 总数据40条，每页10条，一共4页
  - 总数据41条，每页10条，一共5页
  - 结论：总页数 = 向上取整( 总数据 / 页容量 )
  - 假设一页10条
    - 第1页：下标0-9
    - 第2页：下标10-19
    - 第3页：下标20-29
  - 结论：
    - 某页下标开始索引 = (页码 - 1) * 页容量
    - 某页结束索引 = 开始索引 + （页容量-1）













